<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link media="all" rel="stylesheet" href="./css/style.css">

<script src="./js/style.js"></script>



    <title>nginx.conf 配置文件详解 - 打工人日志</title>
</head>

<body>
    <div class="header-box">
    <img src="https://www.jobcher.com/images/logo.webp" id="logo" alt="logo" class="logo">
    <h1><a href="https://www.jobcher.com">打工人日志</a></h1>
</div>
<nav class="nav">
    <ul>
        
            <li>
                <a href="./">首页</a>
                
            </li>
        
            <li>
                <a href="https://nav.jobcher.com/">导航</a>
                
            </li>
        
            <li>
                <a href="./%E5%85%B3%E4%BA%8E%E6%88%91.html">关于</a>
                
            </li>
        
    </ul>
</nav>
    <div id="post" class="post">
        <header>
            <h2 class="post-title">nginx.conf 配置文件详解</h2>
            
        </header>
        <article class="article">
                <div class="single-content">
                    <h1 id="nginxconf-配置文件详解">nginx.conf 配置文件详解</h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e"># vim nginx.conf</span>
</span></span><span style="display:flex;"><span>user nobody nobody; <span style="color:#75715e"># 运行 nginx 的所属组和所有者</span>
</span></span><span style="display:flex;"><span>worker_processes 2; <span style="color:#75715e"># 开启两个 nginx 工作进程,一般几个 CPU 核心就写几</span>
</span></span><span style="display:flex;"><span>error_log logs/error.log notice; <span style="color:#75715e"># 错误日志路径</span>
</span></span><span style="display:flex;"><span>pid logs/nginx.pid; <span style="color:#75715e"># pid 路径</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>events
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    worker_connections 1024; <span style="color:#75715e"># 一个进程能同时处理 1024 个请求</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>http
</span></span><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    include mime.types;
</span></span><span style="display:flex;"><span>    default_type application/octet-stream;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    log_format main ‘$remote_addr – $remote_user <span style="color:#f92672">[</span>$time_local<span style="color:#f92672">]</span> “$request” ‘
</span></span><span style="display:flex;"><span>    ‘$status $body_bytes_sent “$http_referer” ‘
</span></span><span style="display:flex;"><span>    ‘”$http_user_agent” “$http_x_forwarded_for”‘;
</span></span><span style="display:flex;"><span>    access_log logs/access.log main; <span style="color:#75715e"># 默认访问日志路径</span>
</span></span><span style="display:flex;"><span>    sendfile on;
</span></span><span style="display:flex;"><span>    keepalive_timeout 65; <span style="color:#75715e"># keepalive 超市时间</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 开始配置一个域名,一个 server 配置段一般对应一个域名</span>
</span></span><span style="display:flex;"><span>    server
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        listen 80; <span style="color:#75715e">#</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># 在本机所有 ip 上监听 80,也可以写为 192.168.1.202:80,这样的话,就只监听 192.168.1.202 上的 80 口</span>
</span></span><span style="display:flex;"><span>        server_name www.nbtyfood.com; <span style="color:#75715e"># 域名</span>
</span></span><span style="display:flex;"><span>        root /www/html/www.nbtyfood.com; <span style="color:#75715e"># 站点根目录（程序目录）</span>
</span></span><span style="display:flex;"><span>        index index.html index.htm; <span style="color:#75715e"># 索引文件</span>
</span></span><span style="display:flex;"><span>        location /
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">{</span> <span style="color:#75715e"># 可以有多个 location</span>
</span></span><span style="display:flex;"><span>            root /www/html/www.nbtyfood.com; <span style="color:#75715e"># 站点根目录（程序目录）</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        error_page <span style="color:#ae81ff">500</span> <span style="color:#ae81ff">502</span> <span style="color:#ae81ff">503</span> <span style="color:#ae81ff">504</span> /50x.html;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># 定义错误页面,如果是 500 错误,则把站点根目录下的 50x.html 返回给用户</span>
</span></span><span style="display:flex;"><span>        location <span style="color:#f92672">=</span> /50x.html <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        root /www/html/www.nbtyfood.com;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 开始配置站点 bbs.nbtyfood.com</span>
</span></span><span style="display:flex;"><span>    server
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        listen 80;
</span></span><span style="display:flex;"><span>        server_name bbs.nbtyfood.com;
</span></span><span style="display:flex;"><span>        root /www/html/bbs.nbtyfood.com;
</span></span><span style="display:flex;"><span>        index index.html index.htm; <span style="color:#75715e"># 索引文件</span>
</span></span><span style="display:flex;"><span>        location /
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            root /www/html/bbs.nbtyfood.com;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        error_page <span style="color:#ae81ff">500</span> <span style="color:#ae81ff">502</span> <span style="color:#ae81ff">503</span> <span style="color:#ae81ff">504</span> /50x.html;
</span></span><span style="display:flex;"><span>        location <span style="color:#f92672">=</span> /50x.html <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            root /www/html/bbs.nbtyfood.com;
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div>
                </div>
            <br />
        <div>
                
                <a href="https://www.jobcher.com/nginx-%E9%87%8D%E5%86%99%E8%A7%84%E5%88%99-rewrite%E6%A8%A1%E5%9D%97.html" class="prev">前一页</a>
                
                
                <a href="https://www.jobcher.com/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html" class="next">后一页</a>
                
            </div>
        </article>
    </div>

    <nav class="footer-nav">
        <ul>
            
            <li><a href="./%E5%85%B3%E4%BA%8E%E6%88%91.html">关于我们</a></li>
            
            <li><a href="./">网站首页</a></li>
            
            <li><a href=""></a></li>
            
        </ul>
    </nav>
    <footer class="footer">
    <span style="color: aliceblue;">© 2019-2023 by jobcher</span>
</footer>
</body>

</html>