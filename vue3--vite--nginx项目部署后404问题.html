<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link media="all" rel="stylesheet" href="./css/style.css">

<script src="./js/style.js"></script>



    <title>Vue3 &#43; vite &#43; nginx项目部署后404问题 - 打工人日志</title>
</head>

<body>
    <div class="header-box">
    <img src="https://www.jobcher.com/images/logo.webp" id="logo" alt="logo" class="logo">
    <h1><a href="https://www.jobcher.com">打工人日志</a></h1>
</div>
<nav class="nav">
    <ul>
        
            <li>
                <a href="./">首页</a>
                
            </li>
        
            <li>
                <a href="https://nav.jobcher.com/">导航</a>
                
            </li>
        
            <li>
                <a href="./%E5%85%B3%E4%BA%8E%E6%88%91.html">关于</a>
                
            </li>
        
    </ul>
</nav>
    <div id="post" class="post">
        <header>
            <h2 class="post-title">Vue3 &#43; vite &#43; nginx项目部署后404问题</h2>
            
                <img src="./images/nginx.png" alt="Vue3 &#43; vite &#43; nginx项目部署后404问题" class="featured-image">
            
        </header>
        <article class="article">
                <div class="single-content">
                    <h2 id="vue3--vite--nginx项目部署后404问题">Vue3 + vite + nginx项目部署后404问题</h2>
<p><code>vue3 + vite + nginx</code><br>
在服务器上部署后打开首页都没问题，打开其他路径全部 404。<br>
<code>nginx</code> 报错日志：<code>No such file or directory</code></p>
<blockquote>
<p>其实查看 <code>build</code> 后的<code>dist文件夹</code>可以发现，只有一个<code>index.html</code>，当你访问别的路径时<code>nignx</code>查找不到所以就报错了</p>
</blockquote>
<h2 id="解决方案">解决方案</h2>
<p>在 nginx.conf 中添加: <code>try_files $uri $uri/ /index.html;</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-conf" data-lang="conf"><span style="display:flex;"><span>server {
</span></span><span style="display:flex;"><span>          listen       80;
</span></span><span style="display:flex;"><span>          server_name  localhost;
</span></span><span style="display:flex;"><span>          location <span style="color:#960050;background-color:#1e0010">/</span> {
</span></span><span style="display:flex;"><span>          root   <span style="color:#960050;background-color:#1e0010">/</span>dist;
</span></span><span style="display:flex;"><span>          index  index.html index.htm;
</span></span><span style="display:flex;"><span>          <span style="color:#75715e"># 在配置文件的此处加上这句话
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>          try_files <span style="color:#960050;background-color:#1e0010">$</span>uri <span style="color:#960050;background-color:#1e0010">$</span>uri<span style="color:#960050;background-color:#1e0010">/</span> <span style="color:#960050;background-color:#1e0010">/</span>index.html;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h2 id="总结">总结</h2>
<p>其实上述改动就是告诉 nignx 找不到文件的时候就访问 <code>index.html</code> 就可以了。</p>
<p>究其原因其实就是是 vue3 的 router 使用了<code>history</code>模式，该模式与之前<code>hash</code>模式的具体区别可以自行百度一下，不在此赘述。</p>

                </div>
            <br />
        <div>
                
                <a href="https://www.jobcher.com/2023%E4%BA%9A%E8%BF%90%E4%BC%9A%E7%94%B5%E7%AB%9E%E9%97%A8%E7%A5%A8%E6%B0%91%E8%B4%AD%E4%B9%B0%E6%8C%87%E5%8D%97%E6%8A%A5%E5%90%8D-%E6%8A%BD%E7%AD%BE.html" class="prev">前一页</a>
                
                
                <a href="https://www.jobcher.com/%E5%A4%A7%E9%BA%A6%E6%8A%A2%E7%A5%A8%E8%BE%85%E5%8A%A9%E8%BD%AF%E4%BB%B6%E7%A6%8F%E5%88%A9-tfboys%E5%8D%81%E5%B9%B4%E4%B9%8B%E7%BA%A6%E6%BC%94%E5%94%B1%E4%BC%9A-2023-%E5%85%A8%E6%9C%BA%E4%BD%8D-%E8%A7%86%E9%A2%91.html" class="next">后一页</a>
                
            </div>
        </article>
    </div>

    <nav class="footer-nav">
        <ul>
            
            <li><a href="./%E5%85%B3%E4%BA%8E%E6%88%91.html">关于我们</a></li>
            
            <li><a href="./">网站首页</a></li>
            
            <li><a href=""></a></li>
            
        </ul>
    </nav>
    <footer class="footer">
    <span style="color: aliceblue;">© 2019-2023 by jobcher</span>
</footer>
</body>

</html>