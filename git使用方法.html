<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link media="all" rel="stylesheet" href="./css/style.css">

<script src="./js/style.js"></script>



    <title>git使用方法 - 打工人日志</title>
</head>

<body>
    <div class="header-box">
    <img src="https://test.jobcher.com/images/logo.webp" id="logo" alt="logo" class="logo">
    <h1><a href="https://test.jobcher.com">打工人日志</a></h1>
</div>
<nav class="nav">
    <ul>
        
            <li>
                <a href="./">首页</a>
                
            </li>
        
            <li>
                <a href="https://nav.jobcher.com/">导航</a>
                
            </li>
        
            <li>
                <a href="./posts/about">关于</a>
                
            </li>
        
    </ul>
</nav>
    <div id="post" class="post">
        <header>
            <h2 class="post-title">git使用方法</h2>
            
        </header>
        <article class="article">
                <div class="single-content">
                    <h1 id="git-使用方法">git 使用方法</h1>
<h2 id="一git-安装配置">一、git 安装配置</h2>
<ol>
<li>Debian/Ubuntu</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>    apt-get install libcurl4-gnutls-dev libexpat1-dev gettext <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    libz-dev libssl-dev
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    apt-get install git
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    git --version
</span></span><span style="display:flex;"><span>    git version 1.8.1.2
</span></span></code></pre></div><ol start="2">
<li>Centos/RedHat</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>    yum install curl-devel expat-devel gettext-devel <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    openssl-devel zlib-devel
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    yum -y install git-core
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    git --version
</span></span><span style="display:flex;"><span>    git version 1.7.1
</span></span></code></pre></div><h2 id="二git-拉取异常如何重新拉取">二、git 拉取异常如何重新拉取</h2>
<h3 id="1同一文件有修改产生冲突">1.同一文件有修改，产生冲突。</h3>
<ol>
<li>先将本地修改存储起来
使用<code>git stash</code>命令，这样本地的所有修改就都被暂时存储起来 。其中<code>stash@{0}</code>就是刚才保存的标记。后续可以通过此标记访问。</li>
<li>再次拉取代码</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git pull
</span></span></code></pre></div><ol start="3">
<li>还原暂存的内容</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git stash pop stash@<span style="color:#f92672">{</span>0<span style="color:#f92672">}</span>
</span></span></code></pre></div><ol start="4">
<li>解决冲突
在存在冲突的文件中，<code>Updated upstream</code> 和<code>=====</code>之间的内容为拉取下来的代码，<code>=====</code>和<code>stashed changes</code>之间的内容就为本地修改的代码。解决完成之后，就可以正常的提交了。 5.删除<code>stash</code>
使用<code>git stash drop stash@{0}</code>命令，如果不加<code>stash</code>编号，默认的就是删除最新的，即编号为 0 的。或者<code>git stash clear</code>命令，清除所有<code>stash</code>。</li>
</ol>
<h3 id="2想要让某一个文件放弃修改同步服务器">2.想要让某一个文件放弃修改，同步服务器。</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git checkout <span style="color:#f92672">[</span>本地变动文件的路径<span style="color:#f92672">]</span>
</span></span></code></pre></div><h3 id="3服务器代码完全替换和覆盖本地的代码改动">3.服务器代码完全替换和覆盖本地的代码改动。</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git fetch --all
</span></span><span style="display:flex;"><span>git reset --hard origin/master
</span></span><span style="display:flex;"><span>git pull
</span></span></code></pre></div><h2 id="三git-命令表格">三、git 命令表格</h2>
<table>
<thead>
<tr>
<th style="text-align:left">专用名词</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Workspace</td>
<td style="text-align:left">工作区</td>
</tr>
<tr>
<td style="text-align:left">Index/Stage</td>
<td style="text-align:left">暂存区</td>
</tr>
<tr>
<td style="text-align:left">Repository</td>
<td style="text-align:left">仓库区（或本地仓库）</td>
</tr>
<tr>
<td style="text-align:left">Remote</td>
<td style="text-align:left">远程仓库</td>
</tr>
</tbody>
</table>
<p><img src="./images/git2.png" alt="git"></p>
<h3 id="1新建代码仓库">1.新建代码仓库</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e"># 在当前目录新建一个Git代码库</span>
</span></span><span style="display:flex;"><span>$ git init
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 新建一个目录，将其初始化为Git代码库</span>
</span></span><span style="display:flex;"><span>$ git init <span style="color:#f92672">[</span>project-name<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 下载一个项目和它的整个代码历史</span>
</span></span><span style="display:flex;"><span>$ git clone <span style="color:#f92672">[</span>url<span style="color:#f92672">]</span>
</span></span></code></pre></div><h3 id="2配置">2.配置</h3>
<p>Git 的设置文件为<code>.gitconfig</code>，它可以在用户主目录下（全局配置），也可以在项目目录下（项目配置）。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e"># 显示当前的Git配置</span>
</span></span><span style="display:flex;"><span>$ git config --list
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 编辑Git配置文件</span>
</span></span><span style="display:flex;"><span>$ git config -e <span style="color:#f92672">[</span>--global<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 设置提交代码时的用户信息</span>
</span></span><span style="display:flex;"><span>$ git config <span style="color:#f92672">[</span>--global<span style="color:#f92672">]</span> user.name <span style="color:#e6db74">&#34;[name]&#34;</span>
</span></span><span style="display:flex;"><span>$ git config <span style="color:#f92672">[</span>--global<span style="color:#f92672">]</span> user.email <span style="color:#e6db74">&#34;[email address]&#34;</span>
</span></span></code></pre></div><h3 id="3增加删除文件">3.增加/删除文件</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e"># 添加指定文件到暂存区</span>
</span></span><span style="display:flex;"><span>$ git add <span style="color:#f92672">[</span>file1<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>file2<span style="color:#f92672">]</span> ...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 添加指定目录到暂存区，包括子目录</span>
</span></span><span style="display:flex;"><span>$ git add <span style="color:#f92672">[</span>dir<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 添加当前目录的所有文件到暂存区</span>
</span></span><span style="display:flex;"><span>$ git add .
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 添加每个变化前，都会要求确认</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 对于同一个文件的多处变化，可以实现分次提交</span>
</span></span><span style="display:flex;"><span>$ git add -p
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 删除工作区文件，并且将这次删除放入暂存区</span>
</span></span><span style="display:flex;"><span>$ git rm <span style="color:#f92672">[</span>file1<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>file2<span style="color:#f92672">]</span> ...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 停止追踪指定文件，但该文件会保留在工作区</span>
</span></span><span style="display:flex;"><span>$ git rm --cached <span style="color:#f92672">[</span>file<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 改名文件，并且将这个改名放入暂存区</span>
</span></span><span style="display:flex;"><span>$ git mv <span style="color:#f92672">[</span>file-original<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>file-renamed<span style="color:#f92672">]</span>
</span></span></code></pre></div><h3 id="4代码提交">4.代码提交</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e"># 提交暂存区到仓库区</span>
</span></span><span style="display:flex;"><span>$ git commit -m <span style="color:#f92672">[</span>message<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 提交暂存区的指定文件到仓库区</span>
</span></span><span style="display:flex;"><span>$ git commit <span style="color:#f92672">[</span>file1<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>file2<span style="color:#f92672">]</span> ... -m <span style="color:#f92672">[</span>message<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 提交工作区自上次commit之后的变化，直接到仓库区</span>
</span></span><span style="display:flex;"><span>$ git commit -a
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 提交时显示所有diff信息</span>
</span></span><span style="display:flex;"><span>$ git commit -v
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 使用一次新的commit，替代上一次提交</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 如果代码没有任何新变化，则用来改写上一次commit的提交信息</span>
</span></span><span style="display:flex;"><span>$ git commit --amend -m <span style="color:#f92672">[</span>message<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 重做上一次commit，并包括指定文件的新变化</span>
</span></span><span style="display:flex;"><span>$ git commit --amend <span style="color:#f92672">[</span>file1<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>file2<span style="color:#f92672">]</span> ...
</span></span></code></pre></div><h3 id="5分支">5.分支</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e"># 列出所有本地分支</span>
</span></span><span style="display:flex;"><span>$ git branch
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 列出所有远程分支</span>
</span></span><span style="display:flex;"><span>$ git branch -r
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 列出所有本地分支和远程分支</span>
</span></span><span style="display:flex;"><span>$ git branch -a
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 新建一个分支，但依然停留在当前分支</span>
</span></span><span style="display:flex;"><span>$ git branch <span style="color:#f92672">[</span>branch-name<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 新建一个分支，并切换到该分支</span>
</span></span><span style="display:flex;"><span>$ git checkout -b <span style="color:#f92672">[</span>branch<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 新建一个分支，指向指定commit</span>
</span></span><span style="display:flex;"><span>$ git branch <span style="color:#f92672">[</span>branch<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>commit<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 新建一个分支，与指定的远程分支建立追踪关系</span>
</span></span><span style="display:flex;"><span>$ git branch --track <span style="color:#f92672">[</span>branch<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>remote-branch<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 切换到指定分支，并更新工作区</span>
</span></span><span style="display:flex;"><span>$ git checkout <span style="color:#f92672">[</span>branch-name<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 切换到上一个分支</span>
</span></span><span style="display:flex;"><span>$ git checkout -
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 建立追踪关系，在现有分支与指定的远程分支之间</span>
</span></span><span style="display:flex;"><span>$ git branch --set-upstream <span style="color:#f92672">[</span>branch<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>remote-branch<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 合并指定分支到当前分支</span>
</span></span><span style="display:flex;"><span>$ git merge <span style="color:#f92672">[</span>branch<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 选择一个commit，合并进当前分支</span>
</span></span><span style="display:flex;"><span>$ git cherry-pick <span style="color:#f92672">[</span>commit<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 删除分支</span>
</span></span><span style="display:flex;"><span>$ git branch -d <span style="color:#f92672">[</span>branch-name<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 删除远程分支</span>
</span></span><span style="display:flex;"><span>$ git push origin --delete <span style="color:#f92672">[</span>branch-name<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>$ git branch -dr <span style="color:#f92672">[</span>remote/branch<span style="color:#f92672">]</span>
</span></span></code></pre></div><h3 id="6标签">6.标签</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e"># 列出所有tag</span>
</span></span><span style="display:flex;"><span>$ git tag
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 新建一个tag在当前commit</span>
</span></span><span style="display:flex;"><span>$ git tag <span style="color:#f92672">[</span>tag<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 新建一个tag在指定commit</span>
</span></span><span style="display:flex;"><span>$ git tag <span style="color:#f92672">[</span>tag<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>commit<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 删除本地tag</span>
</span></span><span style="display:flex;"><span>$ git tag -d <span style="color:#f92672">[</span>tag<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 删除远程tag</span>
</span></span><span style="display:flex;"><span>$ git push origin :refs/tags/<span style="color:#f92672">[</span>tagName<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 查看tag信息</span>
</span></span><span style="display:flex;"><span>$ git show <span style="color:#f92672">[</span>tag<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 提交指定tag</span>
</span></span><span style="display:flex;"><span>$ git push <span style="color:#f92672">[</span>remote<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>tag<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 提交所有tag</span>
</span></span><span style="display:flex;"><span>$ git push <span style="color:#f92672">[</span>remote<span style="color:#f92672">]</span> --tags
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 新建一个分支，指向某个tag</span>
</span></span><span style="display:flex;"><span>$ git checkout -b <span style="color:#f92672">[</span>branch<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>tag<span style="color:#f92672">]</span>
</span></span></code></pre></div><h3 id="7查看信息">7.查看信息</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e"># 显示有变更的文件</span>
</span></span><span style="display:flex;"><span>$ git status
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示当前分支的版本历史</span>
</span></span><span style="display:flex;"><span>$ git log
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示commit历史，以及每次commit发生变更的文件</span>
</span></span><span style="display:flex;"><span>$ git log --stat
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 搜索提交历史，根据关键词</span>
</span></span><span style="display:flex;"><span>$ git log -S <span style="color:#f92672">[</span>keyword<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示某个commit之后的所有变动，每个commit占据一行</span>
</span></span><span style="display:flex;"><span>$ git log <span style="color:#f92672">[</span>tag<span style="color:#f92672">]</span> HEAD --pretty<span style="color:#f92672">=</span>format:%s
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示某个commit之后的所有变动，其&#34;提交说明&#34;必须符合搜索条件</span>
</span></span><span style="display:flex;"><span>$ git log <span style="color:#f92672">[</span>tag<span style="color:#f92672">]</span> HEAD --grep feature
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示某个文件的版本历史，包括文件改名</span>
</span></span><span style="display:flex;"><span>$ git log --follow <span style="color:#f92672">[</span>file<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>$ git whatchanged <span style="color:#f92672">[</span>file<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示指定文件相关的每一次diff</span>
</span></span><span style="display:flex;"><span>$ git log -p <span style="color:#f92672">[</span>file<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示过去5次提交</span>
</span></span><span style="display:flex;"><span>$ git log -5 --pretty --oneline
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示所有提交过的用户，按提交次数排序</span>
</span></span><span style="display:flex;"><span>$ git shortlog -sn
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示指定文件是什么人在什么时间修改过</span>
</span></span><span style="display:flex;"><span>$ git blame <span style="color:#f92672">[</span>file<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示暂存区和工作区的差异</span>
</span></span><span style="display:flex;"><span>$ git diff
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示暂存区和上一个commit的差异</span>
</span></span><span style="display:flex;"><span>$ git diff --cached <span style="color:#f92672">[</span>file<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示工作区与当前分支最新commit之间的差异</span>
</span></span><span style="display:flex;"><span>$ git diff HEAD
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示两次提交之间的差异</span>
</span></span><span style="display:flex;"><span>$ git diff <span style="color:#f92672">[</span>first-branch<span style="color:#f92672">]</span>...<span style="color:#f92672">[</span>second-branch<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示今天你写了多少行代码</span>
</span></span><span style="display:flex;"><span>$ git diff --shortstat <span style="color:#e6db74">&#34;@{0 day ago}&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示某次提交的元数据和内容变化</span>
</span></span><span style="display:flex;"><span>$ git show <span style="color:#f92672">[</span>commit<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示某次提交发生变化的文件</span>
</span></span><span style="display:flex;"><span>$ git show --name-only <span style="color:#f92672">[</span>commit<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示某次提交时，某个文件的内容</span>
</span></span><span style="display:flex;"><span>$ git show <span style="color:#f92672">[</span>commit<span style="color:#f92672">]</span>:<span style="color:#f92672">[</span>filename<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示当前分支的最近几次提交</span>
</span></span><span style="display:flex;"><span>$ git reflog
</span></span></code></pre></div><h3 id="远程同步">远程同步</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e"># 下载远程仓库的所有变动</span>
</span></span><span style="display:flex;"><span>$ git fetch <span style="color:#f92672">[</span>remote<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示所有远程仓库</span>
</span></span><span style="display:flex;"><span>$ git remote -v
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 显示某个远程仓库的信息</span>
</span></span><span style="display:flex;"><span>$ git remote show <span style="color:#f92672">[</span>remote<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 增加一个新的远程仓库，并命名</span>
</span></span><span style="display:flex;"><span>$ git remote add <span style="color:#f92672">[</span>shortname<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>url<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 取回远程仓库的变化，并与本地分支合并</span>
</span></span><span style="display:flex;"><span>$ git pull <span style="color:#f92672">[</span>remote<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>branch<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 上传本地指定分支到远程仓库</span>
</span></span><span style="display:flex;"><span>$ git push <span style="color:#f92672">[</span>remote<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>branch<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 强行推送当前分支到远程仓库，即使有冲突</span>
</span></span><span style="display:flex;"><span>$ git push <span style="color:#f92672">[</span>remote<span style="color:#f92672">]</span> --force
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 推送所有分支到远程仓库</span>
</span></span><span style="display:flex;"><span>$ git push <span style="color:#f92672">[</span>remote<span style="color:#f92672">]</span> --all
</span></span></code></pre></div><h3 id="撤销">撤销</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 恢复暂存区的指定文件到工作区</span>
</span></span><span style="display:flex;"><span>$ git checkout <span style="color:#f92672">[</span>file<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 恢复某个commit的指定文件到暂存区和工作区</span>
</span></span><span style="display:flex;"><span>$ git checkout <span style="color:#f92672">[</span>commit<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>file<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 恢复暂存区的所有文件到工作区</span>
</span></span><span style="display:flex;"><span>$ git checkout .
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 重置暂存区的指定文件，与上一次commit保持一致，但工作区不变</span>
</span></span><span style="display:flex;"><span>$ git reset <span style="color:#f92672">[</span>file<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 重置暂存区与工作区，与上一次commit保持一致</span>
</span></span><span style="display:flex;"><span>$ git reset --hard
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 重置当前分支的指针为指定commit，同时重置暂存区，但工作区不变</span>
</span></span><span style="display:flex;"><span>$ git reset <span style="color:#f92672">[</span>commit<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 重置当前分支的HEAD为指定commit，同时重置暂存区和工作区，与指定commit一致</span>
</span></span><span style="display:flex;"><span>$ git reset --hard <span style="color:#f92672">[</span>commit<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 重置当前HEAD为指定commit，但保持暂存区和工作区不变</span>
</span></span><span style="display:flex;"><span>$ git reset --keep <span style="color:#f92672">[</span>commit<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 新建一个commit，用来撤销指定commit</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 后者的所有变化都将被前者抵消，并且应用到当前分支</span>
</span></span><span style="display:flex;"><span>$ git revert <span style="color:#f92672">[</span>commit<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 暂时将未提交的变化移除，稍后再移入</span>
</span></span><span style="display:flex;"><span>$ git stash
</span></span><span style="display:flex;"><span>$ git stash pop
</span></span></code></pre></div><h3 id="其他">其他</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#75715e"># 生成一个可供发布的压缩包</span>
</span></span><span style="display:flex;"><span>$ git archive
</span></span></code></pre></div>
                </div>
            <br />
        <div>
                
                <a href="https://test.jobcher.com/cicd-%E6%A6%82%E5%BF%B5.html" class="prev">前一页</a>
                
                
                <a href="https://test.jobcher.com/kubernetes%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B1%87%E6%80%BB.html" class="next">后一页</a>
                
            </div>
        </article>
    </div>

    <nav class="footer-nav">
        <ul>
            
            <li><a href="./posts/about">关于我们</a></li>
            
            <li><a href="./">网站首页</a></li>
            
            <li><a href=""></a></li>
            
        </ul>
    </nav>
    <footer class="footer">
    <span style="color: aliceblue;">© 2019-2023 by jobcher</span>
</footer>
</body>

</html>