<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link media="all" rel="stylesheet" href="/css/style.css">
    <title>获取用户浏览器默认语言设置，自动判断跳转不同网站</title>
</head>

<body>
    <div class="header-box">
    <img src="https://test.jobcher.com/images/logo.webp" alt="logo" class="logo">
    <h1><a href="https://test.jobcher.com">打工人日志</a></h1>
</div>
<nav class="nav">
    <ul>
        
            <li>
                <a href="/">首页</a>
                
            </li>
        
            <li>
                <a href="/posts">文章</a>
                
            </li>
        
            <li>
                <a href="https://nav.jobcher.com/">导航</a>
                
            </li>
        
            <li>
                <a href="/posts/about">关于</a>
                
            </li>
        
    </ul>
</nav>
    <div id="post" class="post">
        <header>
            <h2 class="post-title">获取用户浏览器默认语言设置，自动判断跳转不同网站</h2>
            
        </header>
        <article class="article">
            <h1 id="自动判断跳转不同网站">自动判断跳转不同网站</h1>
<ol>
<li>根据用户目前的浏览器配置语言进行显示</li>
<li>供语言切换按钮，用户自定义选择不同的语言显示</li>
</ol>
<p>根据识别用户的浏览器语言，自动判断并跳转到相应的语言网页，让你的网站更加灵动。<br>
以下需要将代码放在 HTML 的内即可，然后自行制作多语言页面。<br>
代码如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/javascript&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">//获取用户语言的顺序是
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//1.获取本地缓存里的内容
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//2.用户浏览器的语言设置
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//如果上面2个都没有获取到，就直接使用&#39;en&#39;作为用户选择的语言
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">language</span> <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">localStorage</span>.<span style="color:#a6e22e">getItem</span>(<span style="color:#e6db74">&#34;locale&#34;</span>) <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>    window.<span style="color:#a6e22e">navigator</span>.<span style="color:#a6e22e">language</span>.<span style="color:#a6e22e">toLowerCase</span>() <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;en&#34;</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">//把用户的语言写入缓存，供下次获取使用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">localStorage</span>.<span style="color:#a6e22e">setItem</span>(<span style="color:#e6db74">&#34;locale&#34;</span>, <span style="color:#a6e22e">language</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">//判断用户的语言，跳转到不同的地方
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">language</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#e6db74">&#34;zh-&#34;</span>) <span style="color:#f92672">!==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>    window.<span style="color:#a6e22e">location</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/zh-cn/index.html&#34;</span>;
</span></span><span style="display:flex;"><span>  } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">language</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#e6db74">&#34;en&#34;</span>) <span style="color:#f92672">!==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>    window.<span style="color:#a6e22e">location</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/en/index.html&#34;</span>;
</span></span><span style="display:flex;"><span>  } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//其它的都使用英文
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    window.<span style="color:#a6e22e">location</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/en/index.html&#34;</span>;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span></code></pre></div><p>核心代码<br>
其实核心代码就是利用 navigator 的 language 属性</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>navigator.language
</span></span></code></pre></div><h2 id="第二种解决方案">第二种解决方案</h2>
<p>可以通过获取用户的 IP，然后把 IP 放到 IP 库里查询所在地，从而加载对应的资源，这样的方案回更加准确！有的第三方会直接返回所在国家的编码，比如 cn / en 等就更好了</p>
<p>但是这样的方案也有一个弊端：如果用户通过科学上网，全局模式下，会被认为属于美国 / 日本等等（看梯子的 IP 而定了），那么会导致访问非常慢；但是这种偏差，很多翻墙的人都是了解的，没人会故意用美国的 IP 访问国内的淘宝 / 百度等网站的，除非是忘记切换回来了；</p>
<p>IP 判断<br>
市场上有很多 IP 判断的，拿 IP 倒是非常好做的一件事；比如我现在可以拿到用户访问本网站时候的 IP；</p>
<p>欢迎关注我的博客<a href="https://www.jobcher.com/">www.jobcher.com</a></p>

            <br />
            <div>
                
                <a href="https://test.jobcher.com/posts/kubernetes/k8sloki/" class="prev">前一页</a>
                
                
                <a href="https://test.jobcher.com/posts/base/service/" class="next">后一页</a>
                
            </div>
        </article>
    </div>

    <nav class="footer-nav">
        <ul>
            
            <li><a href="/posts/about">关于我们</a></li>
            
            <li><a href="/posts">博文合集</a></li>
            
            <li><a href="/">网站首页</a></li>
            
        </ul>
    </nav>
    <footer class="footer">
    <span style="color: aliceblue;">© 2019-2023 by jobcher</span>
</footer>
</body>

</html>