<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link media="all" rel="stylesheet" href="/css/style.css">

<script src="/js/style.js"></script>



    <title>Kubernetes — Rook云存储介绍和部署</title>
</head>

<body>
    <div class="header-box">
    <img src="https://test.jobcher.com/images/logo.webp" id="logo" alt="logo" class="logo">
    <h1><a href="https://test.jobcher.com">打工人日志</a></h1>
</div>
<nav class="nav">
    <ul>
        
            <li>
                <a href="/">首页</a>
                
            </li>
        
            <li>
                <a href="/posts">文章</a>
                
            </li>
        
            <li>
                <a href="https://nav.jobcher.com/">导航</a>
                
            </li>
        
            <li>
                <a href="/posts/about">关于</a>
                
            </li>
        
    </ul>
</nav>
    <div id="post" class="post">
        <header>
            <h2 class="post-title">Kubernetes — Rook云存储介绍和部署</h2>
            
        </header>
        <article class="article">
                <div class="single-content">
                    <h1 id="rook-云存储介绍和部署">Rook 云存储介绍和部署</h1>
<p><code>Rook </code>将<code>分布式存储软件</code>转变为<code>自我管理</code>，<code>自我缩放</code>和<code>自我修复</code>的<code>存储服务</code>。它通过自动化部署，引导、配置、供应、扩展、升级、迁移、灾难恢复、监控和资源管理来实现。 <code>Rook</code> 使用基础的云原生容器管理、调度和编排平台提供的功能来履行其职责。</p>
<p><code>Rook</code> 利用扩展点深入融入<code>云原生环境</code>，为调度、生命周期管理、资源管理、安全性、监控和用户体验提供无缝体验。</p>
<h2 id="部署">部署</h2>
<h3 id="使用-helm-部署">使用 helm 部署</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>helm init -i jimmysong/kubernetes-helm-tiller:v2.8.1
</span></span><span style="display:flex;"><span>helm repo add rook-alpha https://charts.rook.io/alpha
</span></span><span style="display:flex;"><span>helm install rook-alpha/rook --name rook --namespace rook-system
</span></span></code></pre></div><h3 id="直接使用-yaml-文件部署">直接使用 yaml 文件部署</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f rook-operator.yaml
</span></span></code></pre></div><p>不论使用那种方式部署的 rook operator，都会在 rook-agent 中看到 rook-agent 用户无法列出集群中某些资源的错误，可以通过为 rook-agent 的分配 cluster-admin 权限临时解决，详见 <a href="https://github.com/rook/rook/issues/1472">Issue 1472</a>。</p>
<p>使用如下 yaml 文件创建一个 <code>ClusterRoleBinding</code> 并应用到集群中。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ClusterRoleBinding</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">rbac.authorization.k8s.io/v1beta1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">rookagent-clusterrolebinding</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">subjects</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ServiceAccount</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">rook-agent</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">rook-system</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">roleRef</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ClusterRole</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">cluster-admin</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">apiGroup</span>: <span style="color:#e6db74">&#34;&#34;</span>
</span></span></code></pre></div><h3 id="部署-rook-cluster">部署 rook cluster</h3>
<p>创建完 <code>rook operator</code> 后，我们再部署 <code>rook cluster</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Namespace</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">rook</span>
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">rook.io/v1alpha1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Cluster</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">rook</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">rook</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">versionTag</span>: <span style="color:#ae81ff">v0.6.2</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">dataDirHostPath</span>: <span style="color:#ae81ff">/var/lib/rook</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">storage</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">useAllNodes</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">useAllDevices</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">storeConfig</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">storeType</span>: <span style="color:#ae81ff">bluestore</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">databaseSizeMB</span>: <span style="color:#ae81ff">1024</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">journalSizeMB</span>: <span style="color:#ae81ff">1024</span>
</span></span></code></pre></div><blockquote>
<p><code>注意</code>：需要手动指定 <code>versionTag</code>，因为该镜像 <code>repo</code> 中没有 <code>latest</code> 标签，如不指定的话 Pod 将出现镜像拉取错误。</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f rook-cluster.yaml
</span></span></code></pre></div><p>rook 集群运行在<code>rook</code> namespace 下，查看 rook 集群中的 pod：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ kubectl -n rook get pod
</span></span><span style="display:flex;"><span>NAME                             READY     STATUS    RESTARTS   AGE
</span></span><span style="display:flex;"><span>rook-api-848df956bf-q6zf2        1/1       Running   <span style="color:#ae81ff">0</span>          4m
</span></span><span style="display:flex;"><span>rook-ceph-mgr0-cfccfd6b8-cpk5p   1/1       Running   <span style="color:#ae81ff">0</span>          4m
</span></span><span style="display:flex;"><span>rook-ceph-mon0-t496l             1/1       Running   <span style="color:#ae81ff">0</span>          6m
</span></span><span style="display:flex;"><span>rook-ceph-mon1-zcn7v             1/1       Running   <span style="color:#ae81ff">0</span>          5m
</span></span><span style="display:flex;"><span>rook-ceph-mon3-h97qx             1/1       Running   <span style="color:#ae81ff">0</span>          3m
</span></span><span style="display:flex;"><span>rook-ceph-osd-557tn              1/1       Running   <span style="color:#ae81ff">0</span>          4m
</span></span><span style="display:flex;"><span>rook-ceph-osd-74frb              1/1       Running   <span style="color:#ae81ff">0</span>          4m
</span></span><span style="display:flex;"><span>rook-ceph-osd-zf7rg              1/1       Running   <span style="color:#ae81ff">1</span>          4m
</span></span><span style="display:flex;"><span>rook-tools                       1/1       Running   <span style="color:#ae81ff">0</span>          2m
</span></span></code></pre></div><h3 id="部署-storageclass">部署 StorageClass</h3>
<p>StorageClass <code>rook-block</code> 的 yaml 文件（rook-storage.yaml）如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">rook.io/v1alpha1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Pool</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">replicapool</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">rook</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">replicated</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">size</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># For an erasure-coded pool, comment out the replication size above and uncomment the following settings.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Make sure you have enough OSDs to support the replica size or erasure code chunks.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">#erasureCoded:</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">#  dataChunks: 2</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">#  codingChunks: 1</span>
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">storage.k8s.io/v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">StorageClass</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">rook-block</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">provisioner</span>: <span style="color:#ae81ff">rook.io/block</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">parameters</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">pool</span>: <span style="color:#ae81ff">replicapool</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Specify the Rook cluster from which to create volumes.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># If not specified, it will use `rook` as the name of the cluster.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># This is also the namespace where the cluster will be</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">clusterName</span>: <span style="color:#ae81ff">rook</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Specify the filesystem type of the volume. If not specified, it will use `ext4`.</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># fstype: ext4</span>
</span></span></code></pre></div><h2 id="工具">工具</h2>
<p>部署 <code>Rook</code> 操作工具 pod，该工具 pod 的 yaml 文件（<code>rook-tools.yaml</code>）如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">apiVersion</span>: <span style="color:#ae81ff">v1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">kind</span>: <span style="color:#ae81ff">Pod</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">metadata</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">name</span>: <span style="color:#ae81ff">rook-tools</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">namespace</span>: <span style="color:#ae81ff">rook-system</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spec</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">dnsPolicy</span>: <span style="color:#ae81ff">ClusterFirstWithHostNet</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">serviceAccountName</span>: <span style="color:#ae81ff">rook-operator</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">rook-tools</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">image</span>: <span style="color:#ae81ff">rook/toolbox:master</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">imagePullPolicy</span>: <span style="color:#ae81ff">IfNotPresent</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">env</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">ROOK_ADMIN_SECRET</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">valueFrom</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">secretKeyRef</span>:
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">name</span>: <span style="color:#ae81ff">rook-ceph-mon</span>
</span></span><span style="display:flex;"><span>              <span style="color:#f92672">key</span>: <span style="color:#ae81ff">admin-secret</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">securityContext</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">privileged</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">volumeMounts</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/dev</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">name</span>: <span style="color:#ae81ff">dev</span>
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/sys/bus</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">name</span>: <span style="color:#ae81ff">sysbus</span>
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/lib/modules</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">name</span>: <span style="color:#ae81ff">libmodules</span>
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">mon-endpoint-volume</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">mountPath</span>: <span style="color:#ae81ff">/etc/rook</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">hostNetwork</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">dev</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">hostPath</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">path</span>: <span style="color:#ae81ff">/dev</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">sysbus</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">hostPath</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">path</span>: <span style="color:#ae81ff">/sys/bus</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">libmodules</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">hostPath</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">path</span>: <span style="color:#ae81ff">/lib/modules</span>
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">mon-endpoint-volume</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">configMap</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">name</span>: <span style="color:#ae81ff">rook-ceph-mon-endpoints</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">items</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#f92672">key</span>: <span style="color:#ae81ff">endpoint</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">path</span>: <span style="color:#ae81ff">mon-endpoints</span>
</span></span></code></pre></div><blockquote>
<p><code>ConfigMap</code> 和 <code>Secret</code> 中的配置项内容是自定义的。
使用下面的命令部署工具 <code>pod</code>：</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f rook-tools.yaml
</span></span></code></pre></div><p>这是一个独立的 pod，没有使用其他高级的 <code>controller</code> 来管理，我们将它部署在 <code>rook-system</code> 的 <code>namespace</code> 下。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl -n rook exec -it rook-tools bash
</span></span></code></pre></div><p>使用下面的命令查看 <code>rook</code> 集群状态。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>$ rookctl status
</span></span><span style="display:flex;"><span>OVERALL STATUS: OK
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>USAGE:
</span></span><span style="display:flex;"><span>TOTAL       USED       DATA      AVAILABLE
</span></span><span style="display:flex;"><span>37.95 GiB   1.50 GiB   <span style="color:#ae81ff">0</span> B       36.45 GiB
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>MONITORS:
</span></span><span style="display:flex;"><span>NAME             ADDRESS                IN QUORUM   STATUS
</span></span><span style="display:flex;"><span>rook-ceph-mon0   10.254.162.99:6790/0   true        UNKNOWN
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>MGRs:
</span></span><span style="display:flex;"><span>NAME             STATUS
</span></span><span style="display:flex;"><span>rook-ceph-mgr0   Active
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>OSDs:
</span></span><span style="display:flex;"><span>TOTAL     UP        IN        FULL      NEAR FULL
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>         <span style="color:#ae81ff">1</span>         <span style="color:#ae81ff">1</span>         false     false
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>PLACEMENT GROUPS <span style="color:#f92672">(</span><span style="color:#ae81ff">0</span> total<span style="color:#f92672">)</span>:
</span></span><span style="display:flex;"><span>STATE     COUNT
</span></span><span style="display:flex;"><span>none
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ ceph df
</span></span><span style="display:flex;"><span>GLOBAL:
</span></span><span style="display:flex;"><span>    SIZE       AVAIL      RAW USED     %RAW USED
</span></span><span style="display:flex;"><span>    38861M     37323M        1537M          3.96
</span></span><span style="display:flex;"><span>POOLS:
</span></span><span style="display:flex;"><span>    NAME     ID     USED     %USED     MAX AVAIL     OBJECTS
</span></span></code></pre></div><h2 id="示例">示例</h2>
<p>官方提供了使用 Rook 作为典型的 LAMP（<code>Linux + Apache + MySQL + PHP</code>）应用 Wordpress 的存储后端的示例的 yaml 文件 <code>mysql.yaml</code> 和 <code>wordpress.yaml</code>，使用下面的命令创建。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>kubectl apply -f mysql.yaml
</span></span><span style="display:flex;"><span>kubectl apply -f wordpress.yaml
</span></span></code></pre></div><h2 id="清理">清理</h2>
<p>如果使用 <code>helm</code> 部署，则执行下面的命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>helm delete --purge rook
</span></span><span style="display:flex;"><span>helm delete daemonset rook-agent
</span></span></code></pre></div><p>如果使用 <code>yaml</code> 文件直接部署，则使用 <code>kubectl delete -f</code> 加当初使用的 <code>yaml</code> 文件即可删除集群。</p>

                </div>
            <br />
        <div>
                
                <a href="https://test.jobcher.com/posts/web3.0/ipfs/" class="prev">前一页</a>
                
                
                <a href="https://test.jobcher.com/posts/kubernetes/k8s15/" class="next">后一页</a>
                
            </div>
        </article>
    </div>

    <nav class="footer-nav">
        <ul>
            
            <li><a href="/posts/about">关于我们</a></li>
            
            <li><a href="/posts">博文合集</a></li>
            
            <li><a href="/">网站首页</a></li>
            
        </ul>
    </nav>
    <footer class="footer">
    <span style="color: aliceblue;">© 2019-2023 by jobcher</span>
</footer>
</body>

</html>