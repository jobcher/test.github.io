<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link media="all" rel="stylesheet" href="/css/style.css">

<script src="/js/style.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"></script>

    <title>iptables 基础知识</title>
</head>

<body>
    <div class="header-box">
    <img src="https://test.jobcher.com/images/logo.webp" id="logo" alt="logo" class="logo">
    <h1><a href="https://test.jobcher.com">打工人日志</a></h1>
</div>
<nav class="nav">
    <ul>
        
            <li>
                <a href="/">首页</a>
                
            </li>
        
            <li>
                <a href="/posts">文章</a>
                
            </li>
        
            <li>
                <a href="https://nav.jobcher.com/">导航</a>
                
            </li>
        
            <li>
                <a href="/posts/about">关于</a>
                
            </li>
        
    </ul>
</nav>
    <div id="post" class="post">
        <header>
            <h2 class="post-title">iptables 基础知识</h2>
            
        </header>
        <article class="article">
                <div class="single-content">
                    <h1 id="iptables-基础知识">iptables 基础知识</h1>
<p>内核包过滤与 NAT 管理工具.是 linux 系统中在用户空间中运行的运来配置内核防火墙的工具。它可以设置，维护和检查 linux 内核中的 ipv4 包过滤规则和管理网络地址转换（NAT）。<br>
ipatbles 命令仅支持 ipv4，如果使用的 IP 协议是 ipv6 则需要使用专门的管理工具 ip6tables。</p>
<h2 id="常用参数">常用参数</h2>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-t&lt;表&gt;</td>
<td style="text-align:left">指定要操纵的表</td>
</tr>
<tr>
<td style="text-align:left">-A</td>
<td style="text-align:left">向规则链中追加条目</td>
</tr>
<tr>
<td style="text-align:left">-D</td>
<td style="text-align:left">从规则链中删除条目</td>
</tr>
<tr>
<td style="text-align:left">-I</td>
<td style="text-align:left">向规则链中插入条目</td>
</tr>
<tr>
<td style="text-align:left">-R</td>
<td style="text-align:left">替换规则链中的相应条目</td>
</tr>
<tr>
<td style="text-align:left">-L</td>
<td style="text-align:left">显示规则链中的已有条目</td>
</tr>
<tr>
<td style="text-align:left">-F</td>
<td style="text-align:left">清除规则链中的现有条目。不改变规则链的默认目标策略</td>
</tr>
<tr>
<td style="text-align:left">-Z</td>
<td style="text-align:left">清空规则链中的数据包计数器和字节计数器</td>
</tr>
<tr>
<td style="text-align:left">-N</td>
<td style="text-align:left">创建新的用户自定义规则链</td>
</tr>
<tr>
<td style="text-align:left">-P</td>
<td style="text-align:left">定义规则链中的默认目标（策略）</td>
</tr>
<tr>
<td style="text-align:left">-h</td>
<td style="text-align:left">显示帮助信息</td>
</tr>
<tr>
<td style="text-align:left">-p&lt;协议&gt;</td>
<td style="text-align:left">指定要匹配的数据包的协议类型</td>
</tr>
<tr>
<td style="text-align:left">-s&lt;源地址&gt;</td>
<td style="text-align:left">指定要匹配的数据包的源 IP 地址</td>
</tr>
<tr>
<td style="text-align:left">-j&lt;目标&gt;</td>
<td style="text-align:left">指定要跳转的目标</td>
</tr>
<tr>
<td style="text-align:left">-i&lt;网络接口&gt;</td>
<td style="text-align:left">指定数据包进入本机的网络接口</td>
</tr>
<tr>
<td style="text-align:left">-o&lt;网络接口&gt;</td>
<td style="text-align:left">指定数据包离开本机做使用的网络接口</td>
</tr>
<tr>
<td style="text-align:left">-c&lt;包计数&gt;</td>
<td style="text-align:left">在执行插入、追加和替换操作时初始化包计数器和字节计数器</td>
</tr>
</tbody>
</table>
<h2 id="参考实例">参考实例</h2>
<p>显示内核当前的 filter 表：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>iptables -L
</span></span></code></pre></div><p>显示内核当前的 nat 表：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>iptables -L -t nat
</span></span></code></pre></div><p>禁止本机对 192.168.20.20 地址的访问：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>iptables -t filter -A OUTPUT -d 192.168.20.20 -j DROP
</span></span></code></pre></div><p>显示 filter 表的 OUTPUT 链：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>iptables -L OUTPUT -t filter
</span></span></code></pre></div>
                </div>
            <br />
        <div>
                
                <a href="https://test.jobcher.com/posts/git/gitrsync/" class="prev">前一页</a>
                
                
                <a href="https://test.jobcher.com/posts/kubernetes/k3supgrade/" class="next">后一页</a>
                
            </div>
        </article>
    </div>

    <nav class="footer-nav">
        <ul>
            
            <li><a href="/posts/about">关于我们</a></li>
            
            <li><a href="/posts">博文合集</a></li>
            
            <li><a href="/">网站首页</a></li>
            
        </ul>
    </nav>
    <footer class="footer">
    <span style="color: aliceblue;">© 2019-2023 by jobcher</span>
</footer>
</body>

</html>